<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MineSweeper</title>

    <link rel="stylesheet" href="src/index.css"/>

    <script src="build/index.js" defer></script>
</head>
<body>
    <div class="canvas-container">
        <canvas id="canvas"></canvas>
    </div>

    <script id="vertex-shader" type="x-shader/x-vertex">
        #version 100

        attribute vec2 aPosition;
        attribute vec2 aTextureCoord;

        varying highp vec2 vTextureCoord;

        void main()
        {
          gl_Position = vec4(aPosition.x, aPosition.y, 0.0, 1.0);
          vTextureCoord = aTextureCoord;
        }
    </script>

    <script id="fragment-shader" type="x-shader/x-fragment">
        #version 100
        precision mediump float;

        uniform vec2 resolution;
        uniform vec2 size;

        uniform sampler2D uSampler;

        varying highp vec2 vTextureCoord;

        float stroke = 1.;
        
        float grid(vec2 fragCoord, float space, float gridWidth)
        {
            vec2 p  = fragCoord + vec2(.5);
            vec2 size = vec2(gridWidth);
            
            vec2 a1 = mod(p - size, space);
            vec2 a2 = mod(p + size, space);
            vec2 a = a2 - a1;
               
            float g = min(a.x, a.y);
            return clamp(g, 0., 1.0);
        }

        float getBounds(float a) {
            float stroke = 0.02;
            if (a < stroke || a > 1. - stroke) {
                return 1.;
            }
            return 0.;
        }

        void main()
        {   
            vec2 st = (gl_FragCoord.xy) / resolution.xy;

            float x = getBounds(fract(st.x * size.y));
            float y = getBounds(fract(st.y * size.x));

            if (x == 1. || y == 1.) {
                gl_FragColor.rgb = vec3(0.);
            } else {
                gl_FragColor.rgb = vec3(1.);
            }

            gl_FragColor = texture2D(uSampler, vTextureCoord);

            gl_FragColor.a = 1.0;
        }
    </script>
</body>
</html>